<div
  class="checkout-header flex justify-center items-center p-4 bg-white shadow-md"
>
  <a routerLink="/">
    <img src="images/logo.webp" alt="logo" width="150" height="50" />
  </a>
</div>

<div class="flex items-center justify-center flex-col my-8 px-4">
  <div
    class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-4xl border border-gray-200"
  >
    <h2 class="text-4xl font-extrabold text-gray-800 text-center mb-8">
      Create Your Account
    </h2>

    @if (successMessage || errorMessage) { @if (successMessage) {
    <div
      class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6 text-center"
      role="alert"
    >
      <strong class="font-bold">Success!</strong>
      <span class="block sm:inline ml-2">{{ successMessage }}</span>
    </div>
    } @if (errorMessage) {
    <div
      class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6 text-center"
      role="alert"
    >
      <strong class="font-bold">Error!</strong>
      <span class="block sm:inline ml-2">{{ errorMessage }}</span>
    </div>
    } }

    <form
      [formGroup]="registerForm"
      class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6"
    >
      <div class="md:col-span-2">
        <h3 class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-2">
          Personal Information
        </h3>
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Full Name</mat-label>
          <input matInput formControlName="name" placeholder="e.g. John Doe" />
        </mat-form-field>
        @if (formValidation['name'].touched) { @if
        (formValidation['name'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Name is required.</div>
        } @if (formValidation['name'].errors?.['minlength']) {
        <div class="text-red-600 text-sm mt-1">
          Minimum 3 characters required.
        </div>
        } }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Email Address</mat-label>
          <input
            matInput
            type="email"
            formControlName="email"
            placeholder="e.g. john.doe@example.com"
          />
        </mat-form-field>
        @if (formValidation['email'].touched) { @if
        (formValidation['email'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Email is required.</div>
        } @if (formValidation['email'].errors?.['email']) {
        <div class="text-red-600 text-sm mt-1">
          Please enter a valid email address.
        </div>
        } }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Password</mat-label>
          <input
            matInput
            type="password"
            formControlName="password"
            placeholder="Enter a strong password"
          />
        </mat-form-field>
        @if (formValidation['password'].touched) { @if
        (formValidation['password'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Password is required.</div>
        } @if (formValidation['password'].errors?.['minlength']) {
        <div class="text-red-600 text-sm mt-1">
          Password must be at least 8 characters long.
        </div>
        } @if (formValidation['password'].errors?.['pattern']) {
        <div class="text-red-600 text-sm mt-1">
          Must include 1 uppercase, 1 lowercase, 1 number, and 1 special
          character.
        </div>
        } }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Confirm Password</mat-label>
          <input
            matInput
            type="password"
            formControlName="cpassword"
            placeholder="Re-enter your password"
          />
        </mat-form-field>
        @if (formValidation['cpassword'].touched ||
        formValidation['cpassword'].dirty) { @if
        (formValidation['cpassword'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">
          Confirm Password is required.
        </div>
        } @if (registerForm.errors?.['passwordMismatch'] &&
        !formValidation['cpassword'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Passwords do not match.</div>
        } }
      </div>

      <div class="col-span-full flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Contact Number</mat-label>
          <input
            matInput
            formControlName="contact"
            placeholder="e.g. 9876543210"
          />
        </mat-form-field>
        @if (formValidation['contact'].touched) { @if
        (formValidation['contact'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Contact number is required.</div>
        } @if (formValidation['contact'].errors?.['pattern']) {
        <div class="text-red-600 text-sm mt-1">Please use numbers only.</div>
        } @if (formValidation['contact'].errors?.['minlength']) {
        <div class="text-red-600 text-sm mt-1">Minimum 10 digits required.</div>
        } }
      </div>

      <div class="md:col-span-2 mt-6">
        <h3 class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-2">
          Address Information
        </h3>
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Address Line 1</mat-label>
          <input
            matInput
            formControlName="address1"
            placeholder="e.g. House No. 123, Street Name"
          />
        </mat-form-field>
        @if (formValidation['address1'].touched &&
        formValidation['address1'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Address Line 1 is required.</div>
        }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Address Line 2 (Optional)</mat-label>
          <input
            matInput
            formControlName="address2"
            placeholder="e.g. Apartment, Landmark"
          />
        </mat-form-field>
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>City</mat-label>
          <input matInput formControlName="city" placeholder="e.g. New York" />
        </mat-form-field>
        @if (formValidation['city'].touched &&
        formValidation['city'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">City is required.</div>
        }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>State</mat-label>
          <input matInput formControlName="state" placeholder="e.g. NY" />
        </mat-form-field>
        @if (formValidation['state'].touched &&
        formValidation['state'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">State is required.</div>
        }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Country</mat-label>
          <input matInput formControlName="country" placeholder="e.g. USA" />
        </mat-form-field>
        @if (formValidation['country'].touched &&
        formValidation['country'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Country is required.</div>
        }
      </div>

      <div class="flex flex-col">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Pincode / Zip Code</mat-label>
          <input matInput formControlName="pincode" placeholder="e.g. 10001" />
        </mat-form-field>
        @if (formValidation['pincode'].touched) { @if
        (formValidation['pincode'].errors?.['required']) {
        <div class="text-red-600 text-sm mt-1">Pincode is required.</div>
        } @if (formValidation['pincode'].errors?.['pattern']) {
        <div class="text-red-600 text-sm mt-1">
          Please use numbers only for pincode.
        </div>
        } }
      </div>
    </form>

    <button
      mat-raised-button
      color="primary"
      class="w-full mt-10 py-3 text-lg font-semibold text-white shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out"
      [disabled]="!registerForm.valid"
      (click)="addRegister()"
    >
      Register Account
    </button>

    <div class="text-center mt-6 text-base text-gray-600">
      Already have an account?
      <button
        (click)="login()"
        class="text-blue-600 hover:underline font-medium ml-1"
      >
        Login here
      </button>
    </div>
  </div>
</div>
